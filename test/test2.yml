---
- hosts: localhost
  become: true
  tasks:
    - name: "Checking if dir exists"
      ansible.builtin.stat:
        path: /home/zeno/Documents/from_git/libvibrant
        get_checksum: no
      register: p
    
    - name: "Reporting if dir exists"
      ansible.builtin.debug:
        msg: "Path exists and is a directory"
      when: p.stat.isdir is defined and p.stat.isdir
    
    
    - name: "Cloning GitHub repo: vibrantLinux"
      ansible.builtin.git:
        repo: 'https://github.com/zee-mzha/vibrantLinux.git'
        dest: /home/zeno/Documents/from_git/vibrantlinux
      when: p.stat.exists == False

    - name: "Changing permissions on git folders"
      ansible.builtin.file:
        state: directory
        path: /home/zeno/Documents/from_git
        recurse: yes
        owner: zeno
        group: zeno